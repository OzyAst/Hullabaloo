!function(o,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["jquery"],t):o.hullabaloo=t()}(this,function(){return new function(){return this.hullabaloo=function(){this.hullabaloo={},this.hullabaloos=[],this.success=!1,this.options={ele:"body",offset:{from:"top",amount:20},align:"right",width:250,delay:5e3,allow_dismiss:!0,stackup_spacing:10,text:"Произошла неизвестная ошибка.",icon:{success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-life-ring",danger:"fa fa-exclamation-circle",light:"fa fa-sun",dark:"fa fa-moon"},status:"danger",alertClass:"",fnStart:!1,fnEnd:!1,fnEndHide:!1}},this.hullabaloo.prototype.send=function(o,t,s=1){"function"==typeof this.options.fnStart&&this.options.fnStart();var e,l=this,a=1,i=+this.hullabaloos.length-1,n=this.generate(o,t);if(s&&this.hullabaloos.length)for(;i>=0&&a;)this.hullabaloos[i].text==n.text&&this.hullabaloos[i].status==n.status&&(e=this.hullabaloos[i],a=0,n.elem.css(this.options.offset.from,parseInt(e.elem.css(this.options.offset.from))+4),n.elem.css(this.options.align,parseInt(e.elem.css(this.options.align))+4)),i--;"object"==typeof e?(clearTimeout(e.timer),e.timer=setTimeout(function(){l.closed(e)},this.options.delay),n.parent=e,e.hullabalooGroup.push(n)):(n.position=parseInt(n.elem.css(this.options.offset.from)),n.timer=setTimeout(function(){l.closed(n)},this.options.delay),this.hullabaloos.push(n)),n.elem.fadeIn(),"function"==typeof this.options.fnEnd&&this.options.fnEnd()},this.hullabaloo.prototype.closed=function(o){var t,s,e,l;if("parent"in o&&(o=o.parent),null!==this.hullabaloos){if(-1==(t=$.inArray(o,this.hullabaloos)))return;if(o.hullabalooGroup&&o.hullabalooGroup.length)for(s=0;s<o.hullabalooGroup.length;s++)$(o.hullabalooGroup[s].elem).remove();if($(this.hullabaloos[t].elem).fadeOut("slow",function(){this.remove()}),-1!==t){if(l=t+1,this.hullabaloos.length>1&&l<this.hullabaloos.length)for(e=this.hullabaloos[l].position-this.hullabaloos[t].position,s=t;s<this.hullabaloos.length;s++)this.animate(this.hullabaloos[s],parseInt(this.hullabaloos[s].position)-e),this.hullabaloos[s].position=parseInt(this.hullabaloos[s].position)-e;this.hullabaloos.splice(t,1),"function"==typeof this.options.fnEndHide&&this.options.fnEndHide()}}},this.hullabaloo.prototype.animate=function(o,t){var s,e,l,a=this,i=0;e=parseInt(o.elem.css(a.options.offset.from)),i=o.hullabalooGroup.length,s=setInterval(function(){if(e==t)clearInterval(s);else if(e--,o.elem.css(a.options.offset.from,e),i)for(l=0;l<i;l++)o.hullabalooGroup[l].elem.css(a.options.offset.from,e+5)},2)},this.hullabaloo.prototype.generate=function(o,t){var s,e,l,a={icon:"",status:t||this.options.status,text:o||this.options.text,elem:$("<div>"),hullabalooGroup:[]};switch(self=this,s=this.options,a.elem.attr("class","hullabaloo alert "+s.alertClass),a.elem.addClass("alert-"+a.status),s.allow_dismiss&&(a.elem.addClass("alert-dismissible"),a.elem.append('<button class="close" type="button" id="hullabalooClose" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),$("#hullabalooClose",$(a.elem)).bind("click",function(){self.closed(a)})),a.status){case"success":a.icon=s.icon.success;break;case"info":a.icon=s.icon.info;break;case"danger":a.icon=s.icon.danger;break;case"light":a.icon=s.icon.light;break;case"dark":a.icon=s.icon.dark;break;default:a.icon=s.icon.warning}switch(a.elem.append('<i class="'+a.icon+'"></i> '+a.text),e=s.offset.amount,$(".hullabaloo").each(function(){return e=Math.max(e,parseInt($(this).css(s.offset.from))+$(this).outerHeight()+s.stackup_spacing)}),(l={position:"body"===s.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"})[s.offset.from]=e+"px",a.elem.css(l),"auto"!==s.width&&a.elem.css("width",s.width+"px"),$(s.ele).append(a.elem),s.align){case"center":a.elem.css({left:"50%","margin-left":"-"+a.elem.outerWidth()/2+"px"});break;case"left":a.elem.css("left","20px");break;default:a.elem.css("right","20px")}return a},this.hullabaloo}});